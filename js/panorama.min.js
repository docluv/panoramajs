(function(e,t){"use strict";var n=function(e,t){return new n.fn.init(e,t)};return n.fn=n.prototype={constructor:n,init:function(e,t){return this.settings=this.extend({},this.settings,t),this.setupElements(e),this.setPanoramaDimensions(),this.buildTransitionValue(),this.buildVendorNames(),this.support.transitionEnd=this.eventNames[this.support.transition]||null,this.bindEvents(),this.currentPanel=2,this},version:"0.0.1",extend:function(){var e=arguments[0]||{},n=1,r,i,s,o=arguments.length;for(;n<o;n++)if((s=arguments[n])!==null)for(name in s){r=e[name],i=s[name];if(e===i)continue;i!==t&&(e[name]=i)}return e},div:t,currentPanel:1,leftPanel:1,totalPanels:1,support:{},eventNames:{MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},headerTransitionValue:"all 1000ms ease-in-out",transitionValue:"all 1000ms ease-in-out",fastTransition:"all 0ms",buildTransitionValue:function(){return this.transitionValue="all "+this.settings.speed+"ms "+this.settings.easing,this.headerTransitionValue="all "+(this.settings.speed-100)+"ms "+this.settings.easing,this},buildVendorNames:function(){var e=this,t=e.settings;e.div=document.createElement("div"),e.support.transition=e.getVendorPropertyName("transition"),e.support.transitionDelay=e.getVendorPropertyName("transitionDelay"),e.support.transform=e.getVendorPropertyName("transform"),e.support.transformOrigin=e.getVendorPropertyName("transformOrigin"),e.support.transform3d=e.checkTransform3dSupport(),e.div=null},setPanoramaDimensions:function(){var e=this,t,n=e.settings.panelWidth-e.settings.peekWidth,r=e.settings.headerHeight,i=e.settings.panelWidth*3,s=e.settings;e.container.style.height=s.panelHeight+"px",e.panelbody.style.height=s.panelHeight-r+"px",e.panelbody.style.top=r+"px",e.panelbody.style.width=e.totalPanels*n+"px",e.panelbody.style.left=-n+"px";for(t=0;t<e.panels.length;t++)e.panels[t].style.width=n+"px",e.panels[t].style.minHeight=e.panelbody.style.height;if(e.headerPanels.length>1){i=0;for(t=0;t<e.headerPanels.length;t++)i+=e.headerPanels[t].offsetWidth;i*=1.35}e.header&&(e.headerPanels&&e.headerPanels.length>0?(e.header.style.width=i+"px",e.header.style.left=-parseInt(e.headerPanels[0].offsetWidth,10)+"px"):(e.header.style.width=i+"px",e.header.style.paddingLeft=e.header.style.paddingRight=s.panelWidth+"px",e.header.style.left=s.bigHeaderLeft=-s.panelWidth+"px"))},getVendorPropertyName:function(e){var t=["Moz","Webkit","O","ms"],n,r,i=e.charAt(0).toUpperCase()+e.substr(1);if(e in this.div.style)return e;for(r=0;r<t.length;++r){n=t[r]+i;if(n in this.div.style)return n}},checkTransform3dSupport:function(){return this.div.style[this.support.transform]="",this.div.style[this.support.transform]="rotateY(90deg)",this.div.style[this.support.transform]!==""},setupElements:function(e){var t=this,n=t.settings;e?t.container=e:t.container=document.querySelector(n.container),t.panelbody=document.querySelector(n.container+"  "+n.panoramaSelector),t.panels=document.querySelectorAll(n.container+"  "+n.panoramaSelector+"  "+n.singleColumnSelector),t.totalPanels=t.panels.length,t.header=document.querySelector(n.headerStyle),t.headerPanels=document.querySelectorAll(n.headerPanelStyle)},bindEvents:function(){var n=this;this.panelbody.addEventListener(this.support.transitionEnd,function(e){n.tEndCB!==t&&n.tEndCB(),n.tHeaderEndCB!==t&&n.tHeaderEndCB()}),e.addEventListener("orientationchange",function(e){n.resizePanorama(e)}),e.addEventListener("resize",function(e){n.resizePanorama(e)})},resizePanorama:function(t){this.settings.windowWidth=e.innerWidth,this.settings.panelWidth=e.innerWidth,this.settings.panelHeight=e.innerHeight,this.setPanoramaDimensions()},tEndCB:t,tHeaderEndCB:t,moveQue:[],moving:!1,executeMove:function(){var e=this.moveQue.shift();e!==t?(this.moving=!0,this.tEndCB=e.cb,this.panelbody.style[this.support.transition]=this.transitionValue,this.panelbody.style[this.support.transform]=this.support.transform3d?"translate3D("+e.value+"px, 0, 0)":"translateX("+e.value+"px)"):this.moving=!1},movePanels:function(e,t){var n={cb:t,value:e};if(this.moving)return;this.moveQue.push(n),this.moving||this.executeMove()},_movePrevCB:[],_moveNextCB:[],moveHeader:function(e){var n=this,r=0;e===t&&(e=!0);if(n.header){if(n.headerPanels&&n.headerPanels.length>1)e?r=-parseInt(n.headerPanels[1].offsetWidth,10):r=parseInt(n.headerPanels[0].offsetWidth,10),n.header.style[n.support.transition]=n.headerTransitionValue,n.header.style[n.support.transform]=n.support.transform3d?"translate3D("+r+"px, 0, 0)":"translateX("+r+"px)";else{this.currentPanel==2?this.bigHeaderTrans=0:e?this.bigHeaderTrans-=n.settings.panelWidth*n.settings.headerSlide:this.bigHeaderTrans+=n.settings.panelWidth*n.settings.headerSlide;var i=document.querySelector(".big-header");i.style[n.support.transition]=n.headerTransitionValue,i.style[n.support.transform]=n.support.transform3d?"translate3D("+this.bigHeaderTrans+"px, 0, 0)":"translateX("+this.bigHeaderTrans+"px)"}e?n.tHeaderEndCB=n.headerPanels.length>1?n.endHeaderLeft:function(){n.endBigHeaderLeft(r)}:n.tHeaderEndCB=n.headerPanels.length>1?n.endHeaderRight:function(){n.endBigHeaderRight(r)}}},endBigHeaderLeft:function(e){var t=this},endBigHeaderRight:function(e){var t=this},endHeaderLeft:function(){var e=this,t=e.headerPanels;e.header.style[e.support.transition]=e.fastTransition,e.header.appendChild(this.getFirstPanel(t)),e.header.style[e.support.transform]="",e.headerPanels=document.querySelectorAll(e.settings.headerPanelStyle),this.header.style.left=-parseInt(this.headerPanels[0].offsetWidth,10)+"px"},endHeaderRight:function(){var e=this,t=e.headerPanels;e.header.style[e.support.transition]=e.fastTransition,e.header.insertBefore(e.getLastPanel(t),e.header.firstChild),e.header.style[e.support.transform]="",e.headerPanels=document.querySelectorAll(e.settings.headerPanelStyle),this.header.style.left=-parseInt(this.headerPanels[0].offsetWidth,10)+"px"},movePrevious:function(e){return e&&this._movePrevCB.push(e),this},moveNext:function(e){return e&&this._moveNextCB.push(e),this},moveLeft:function(e,t){var n=e.target,r=0;t=t||this.settings.panelWidth-this.settings.peekWidth,this.currentPanel+=1,this.currentPanel>this.totalPanels&&(this.currentPanel=1),this.moveHeader(!0),this.movePanels(-t,this.moveLeftCallback);for(r=0;r<this._moveNextCB.length;r++)this._moveNextCB[r]&&this._moveNextCB[r].call(this.currentPanel)},moveRight:function(e,t){var n=e.target,r=0;t=t||this.settings.panelWidth-this.settings.peekWidth,this.currentPanel-=1,this.currentPanel<1&&(this.currentPanel=this.totalPanels),this.moveHeader(!1),this.movePanels(t,this.moveRightCallback);for(r=0;r<this._movePrevCB.length;r++)this._movePrevCB[r]&&this._movePrevCB[r].call(this.currentPanel)},moveLastPanel:function(){var e=this.panelbody,t=e.childNodes;e.style[this.support.transition]=this.fastTransition,e.appendChild(this.getFirstPanel(t)),e.style[this.support.transform]=""},moveLeftCallback:function(e){e=e||this.panelbody;var t=e.childNodes;e.style[this.support.transition]=this.fastTransition,e.appendChild(this.getFirstPanel(t)),e.style[this.support.transform]="",this.moving=!1,this.executeMove()},moveRightCallback:function(e){e=e||this.panelbody;var t=e.childNodes;e.style[this.support.transition]=this.fastTransition,e.insertBefore(this.getLastPanel(t),e.firstChild),e.style[this.support.transform]="",this.moving=!1,this.executeMove()},getFirstPanel:function(e){var t;for(t=0;t<e.length;t++)if(e[t].nodeType===1)return e[t]},getLastPanel:function(e){var t;for(t=e.length-1;t!==0;t--)if(e[t].nodeType===1)return e[t]},moveCallback:function(e,t){this.movePanels(t,this.moveLeftCallback)},container:t,panelbody:t,panels:t,header:t,headerPanels:t,bigHeaderTrans:0,settings:{panoramaSelector:".panorama-panels",container:".panorama-container",singleColumnSelector:".single-panel",doubleColumnSelector:".double-panel",speed:150,windowWidth:e.innerWidth,panelWidth:e.innerWidth,panelHeight:e.innerHeight,peekWidth:35,easing:"ease-in-out",nextScroll:".panorama-next",prevScroll:".panorama-prev",navWrapper:".panorama-navigation",showPrevNext:!1,headerSlide:.2,bigHeaderLeft:0,headerStyle:".panorama-header",headerPanelStyle:".panorama-panel-header",headerHeight:40}},n.fn.init.prototype=n.fn,e.panorama=n})(window);